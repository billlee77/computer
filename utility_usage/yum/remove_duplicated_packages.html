<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html class="js" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>



<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>yum, rpm and duplicate versions | Ogre.com</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="http://www.ogre.com/files/ogre.com/favicon.ico" type="image/x-icon">
  <link type="text/css" rel="stylesheet" media="all" href="remove_duplicated_packages_files/css_bc78fd74014e1a1b5bc5905b49d48434.css">
  <script src="remove_duplicated_packages_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript" src="remove_duplicated_packages_files/js_33b64261cb9aa9e8125c55b80d6af75f.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "fivestar": { "titleUser": "Your rating: ", "titleAverage": "Average: ", "feedbackSavingVote": "Saving your vote...", "feedbackVoteSaved": "Your vote has been saved.", "feedbackDeletingVote": "Deleting your vote...", "feedbackVoteDeleted": "Your vote has been deleted." }, "googleanalytics": { "trackOutgoing": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip" } });
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
window.google_analytics_uacct = "UA-5872462-1";
//--><!]]>
</script>
  <script type="text/javascript"> </script>
  </head><body id="second">
  <div id="page" class="one-sidebar">
  
    <div id="header">
    
      <div id="logo-title">
       
                  <a href="http://www.ogre.com/" title="Home">
            <img src="remove_duplicated_packages_files/ogre.png" alt="Home" id="logo">
          </a>
                
                  <h1 id="site-name">
            <a href="http://www.ogre.com/" title="Home">
              Ogre.com            </a>
          </h1>
                
         
          <div id="site-slogan">
            Random techno-babble          </div>
                
      </div>
      
      <div class="menu withprimarywithsecondary">
                      <div id="primary" class="clear-block">
              <ul class="links primary-links"><li class="menu-613 first"><a href="http://www.ogre.com/hacking" title="Hacking for fun and profit">Hacking</a></li>
<li class="menu-88"><a href="http://www.ogre.com/">Home</a></li>
<li class="menu-3382"><a href="http://www.ogrephotography.com/" title="">Ogre Photography</a></li>
<li class="menu-89 last"><a href="http://www.ogre.com/node/133">About</a></li>
</ul>            </div>
                    
                      <div id="secondary" class="clear-block">
                      </div>
                </div>
      
              <div id="header-region">
          <div class="block block-node" id="block-node-0">
  <div class="blockinner">

    <h2 class="title"> Syndicate </h2>
    <div class="content">
      <a href="http://www.ogre.com/rss.xml" class="feed-icon"><img src="remove_duplicated_packages_files/feed.png" alt="Syndicate content" title="Syndicate" height="16" width="16"></a>    </div>
    
  </div>
</div>
        </div>
            
    </div>

    <div id="container" class="withleft clear-block">
      
      <div id="main-wrapper">
      <div id="main" class="clear-block">
        <div class="breadcrumb"><a href="http://www.ogre.com/">Home</a> » <a href="http://www.ogre.com/blog">Blogs</a> » <a href="http://www.ogre.com/blog/1">leif's blog</a></div>                        <h1 class="title">yum, rpm and duplicate versions</h1>                                <div class="node" id="node-369">
  
    
  
    <div class="meta with-taxonomy">
  
          <div class="submitted">Posted September 29th, 2010 by <a href="http://www.ogre.com/user/1" title="View user profile.">leif</a></div> 
        
     
      <div class="taxonomy"><ul class="links inline"><li class="taxonomy_term_33 first"><a href="http://www.ogre.com/taxonomy/term/33" rel="tag" title="">Fedora</a></li>
<li class="taxonomy_term_68"><a href="http://www.ogre.com/taxonomy/term/68" rel="tag" title="">rpm</a></li>
<li class="taxonomy_term_67 last"><a href="http://www.ogre.com/taxonomy/term/67" rel="tag" title="">yum</a></li>
</ul></div>
        
  </div>
    
  <div class="content">
    <!-- google_ad_section_start --><p>Apparently, when doing "<em>yum update</em>",
 and it fails miserably, you can end up with duplicate versions of 
packages in the RPM database. This seems harmless, but is annoying. yum 
provides a tool to check for this, but I was not able to find anything 
that would automatically repair it. So here's a little tip:</p>
<pre>$ yum check duplicates | awk '/is a duplicate/ {print $6}' &gt; /tmp/DUPES
$ yum remove `cat /tmp/DUPES`
</pre>
<p>&nbsp;Of course, before you remove the dupes, make sure to examine the tmp file&nbsp;(/tmp/DUPES) and make sure it looks ok.</p>
<p><strong>Update:</strong></p>
<p>There seems to be a command to do this, <em>package-cleanup</em> has an option for it. E.g.</p>
<pre>$ package-cleanup --cleandupes
</pre>
<p>However, testing this command on a second box having the same problem
 gave bad results, it seems to have uninstalled the "real" packages too.</p><!-- google_ad_section_end -->  </div>
  
      <div class="links">
      <ul class="links inline"><li class="blog_usernames_blog first"><a href="http://www.ogre.com/blog/1" title="Read leif's latest blog entries.">leif's blog</a></li>
<li class="comment_add"><a href="http://www.ogre.com/comment/reply/369#comment-form" title="Share your thoughts and opinions related to this posting.">Add new comment</a></li>
<li class="print_html"><a href="http://www.ogre.com/print/369" title="Display a printer-friendly version of this page." class="print-page" rel="nofollow">Printer-friendly version</a></li>
<li class="tweet_Twitter last"><a href="http://twitter.com/?status=yum%2C+rpm+and+duplicate+versions+%23Fedora+%23rpm+%23yum%3A+http%3A/%2Fwww.ogre.com/node/369" class="tweet" rel="nofollow" target="_blank"><img src="remove_duplicated_packages_files/twitter-small.png" alt="Post to Twitter" title="Post to Twitter" height="32" width="32"></a></li>
</ul>    </div>
    
</div>
              </div>
      </div>
      
              <div id="sidebar-left" class="sidebar">
          <form action="/node/369" accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Search this site: </label>
 <input maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" title="Enter the terms you wish to search for." class="form-text" type="text">
</div>
<input name="op" id="edit-submit-1" value="Search" class="form-submit" type="submit">
<input name="form_build_id" id="form-11da409f57dd2a67d0ff096ed71d0248" value="form-11da409f57dd2a67d0ff096ed71d0248" type="hidden">
<input name="form_id" id="edit-search-theme-form" value="search_theme_form" type="hidden">
</div>

</div></form>
          <div class="block block-block" id="block-block-3">
  <div class="blockinner">

    <h2 class="title"> News </h2>
    <div class="content">
      <center>
	<a href="http://www.oscon.com/"> <img alt="OSCON 2011" src="remove_duplicated_packages_files/oscon2011_speaking_150x150.gif" height="150" width="150" border="0"> </a> <a href="http://www.oscon.com/oscon2011/public/schedule/detail/17831">(my Traffic Server talk)</a></center>
    </div>
    
  </div>
</div>
<div class="block block-user" id="block-user-1">
  <div class="blockinner">

    <h2 class="title"> Navigation </h2>
    <div class="content">
      <ul class="menu"><li class="leaf first"><a href="http://www.ogre.com/contact">Contact</a></li>
<li class="collapsed"><a href="http://www.ogre.com/hacking">Hacking</a></li>
<li class="leaf"><a href="http://www.ogre.com/cooking">Cooking tips</a></li>
<li class="leaf"><a href="http://www.ogre.com/sharks">Sharks</a></li>
<li class="leaf"><a href="http://www.ogre.com/Drupal">Drupal</a></li>
<li class="collapsed"><a href="http://www.ogre.com/blog">Blogs</a></li>
<li class="leaf last"><a href="http://www.ogre.com/book">Books</a></li>
</ul>    </div>
    
  </div>
</div>
<div class="block block-user" id="block-user-0">
  <div class="blockinner">

    <h2 class="title"> User login </h2>
    <div class="content">
      <form action="https://www.ogre.com/node/369?destination=node%2F369" accept-charset="UTF-8" method="post" id="user-login-form">
<div><div class="form-item" id="edit-name-wrapper">
 <label for="edit-name">Username: <span class="form-required" title="This field is required.">*</span></label>
 <input maxlength="60" name="name" id="edit-name" size="15" class="form-text required" type="text">
</div>
<div class="form-item" id="edit-pass-wrapper">
 <label for="edit-pass">Password: <span class="form-required" title="This field is required.">*</span></label>
 <input name="pass" id="edit-pass" maxlength="60" size="15" class="form-text required" type="password">
</div>
<input name="op" id="edit-submit" value="Log in" class="form-submit" type="submit">
<div class="item-list"><ul><li class="first last"><a href="https://www.ogre.com/user/password" title="Request new password via e-mail.">Request new password</a></li>
</ul></div><input name="form_build_id" id="form-15a5d207682d40f2c892869890ec12d8" value="form-15a5d207682d40f2c892869890ec12d8" type="hidden">
<input name="form_id" id="edit-user-login-block" value="user_login_block" type="hidden">

</div></form>
    </div>
    
  </div>
</div>
<div class="block block-adsense_managed" id="block-adsense_managed-0">
  <div class="blockinner">

    <h2 class="title"> Sponsors </h2>
    <div class="content">
      <div class="adsense adsense_managed">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8513949928959025";
/* 160x600 */
google_ad_slot = "7860074742";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="remove_duplicated_packages_files/show_ads.js">
</script><ins style="display: inline-table; border: medium none; height: 600px; margin: 0pt; padding: 0pt; position: relative; visibility: visible; width: 160px;"><ins id="aswift_0_anchor" style="display: block; border: medium none; height: 600px; margin: 0pt; padding: 0pt; position: relative; visibility: visible; width: 160px;"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_0" name="aswift_0" style="left: 0pt; position: absolute; top: 0pt;" frameborder="0" height="600" scrolling="no" width="160"></iframe></ins></ins>
</div>    </div>
    
  </div>
</div>
        </div>
      
      
    </div>

    <div id="footer">
          </div>

    
    <script type="text/javascript">
<!--//--><![CDATA[//><!--
var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-5872462-1"]);_gaq.push(["_trackPageview"]);_gaq.push(['_trackPageLoadTime']);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();
//--><!]]>
</script>
    
  </div>

</body></html>