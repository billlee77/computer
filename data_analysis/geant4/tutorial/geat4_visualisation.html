<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><!-- Generated by Doxygen 1.5.1-20070219 -->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Geant4 Users' Tutorial</title>
<link href="geat4_visualisation_files/doxystyle.css" rel="stylesheet" type="text/css">
<link href="geat4_visualisation_files/tabs.css" rel="stylesheet" type="text/css">
<link href="geat4_visualisation_files/print.css" rel="stylesheet" type="text/css" media="print">
<script src="geat4_visualisation_files/highlight.js" type="text/javascript"></script>
</head><body onload="HighlightCurrentTask()">
<!-- end of Generated by Doxygen 1.5.1-20070219 -->

<div class="tabs">
  <ul>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task0/overview.html"><span> Intro </span></a></li>
    <li class="current"><a href="http://g4course2010.web.cern.ch/g4course2010/task0/index.html"><span> Task 0 </span></a></li>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task1/index.html"><span> Task 1 </span></a></li>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task2/index.html"><span> Task 2 </span></a></li>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task3/index.html"><span> Task 3 </span></a></li>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task4/index.html"><span> Task 4 </span></a></li>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task5/index.html"><span> Task 5 </span></a></li>
    <li><a href="http://g4course2010.web.cern.ch/g4course2010/task6/index.html"><span> Task 6 </span></a></li>
    <li><a href="http://www-geant4.kek.jp/Reference/current/"><span> Reference </span></a></li>    
 </ul>
</div>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="http://g4course2010.web.cern.ch/g4course2010/task0/index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="http://g4course2010.web.cern.ch/g4course2010/task0/files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="http://g4course2010.web.cern.ch/g4course2010/task0/index.html">Task 0</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="vis">Task 0.b Exercises on Visualisation </a></h1><h2><a class="anchor" name="s1">
OBJECTIVE</a></h2>
Run a Geant4 example and visualize the setup.<p>
Run the same example with the advanced Qt dirver.</p><h2><a class="anchor" name="s2">
HOW</a></h2>
For this task we will use the exampleN03 that comes with Geant4.<p>
Example can be found under: </p><div class="fragment"><pre class="fragment">        $G4INSTALL/examples/novice/N03
</pre></div> Copy the example code to your working directory: <div class="fragment"><pre class="fragment">        % cd ~/g4course2010
	% cp -r $G4INSTALL/examples/novice/N03 .
        % cd N03
        % less README
</pre></div> To compile the code enter the N03 directory and run <div class="fragment"><pre class="fragment">        % gmake
</pre></div> Test that everything works by executing: <div class="fragment"><pre class="fragment">        % $G4WORKDIR/bin/$G4SYSTEM/exampleN03
</pre></div><p>
Type exit at G4 prompt to exit application: </p><div class="fragment"><pre class="fragment">        ....
        Idle&gt; # type your commands. example:
        Idle&gt; /run/beamOn 1
        ....
        Idle&gt; exit
</pre></div><h2><a class="anchor" name="s3">
PRACTICE</a></h2>
For background information see <a href="http://cern.ch/geant4/UserDocumentation/UsersGuides/ForApplicationDeveloper/html">User's Guide for Application Developers</a><h3><a class="anchor" name="vis3sub1">
Exercise 0.4: Check which visualization drivers are available</a></h3>
Check which visualization drivers have been compiled in Geant4. Run exampleN03 and pay attention to the output: <div class="fragment"><pre class="fragment">         Current available graphics systems are:
	   ASCIITree (ATree)
	   .....
    </pre></div> You can always retrieve this list with the command: <div class="fragment"><pre class="fragment">       Idle&gt; /vis/list
    </pre></div> at Geant4 prompt.<p>
Check that OpenGL dirver is available.Check that OpenGL with Qt extensions has been build.</p><p>
What are the corresponding driver names (short string between parenthesis)?</p><p>
Which drivers are available in your application?</p><p>
To use a specific driver, one can issue the command: </p><div class="fragment"><pre class="fragment">       Idle&gt; /vis/open DRIVERNAME
    </pre></div> at Geant4 prompt.<p>
Look at vis.mac macro file, what is the driver that you are using?</p><h3><a class="anchor" name="vis3sub2">
Exercise 0.5: Check which User Interfaces (UI) are available</a></h3>
User Interfaces define how you will interact with the application.<p>
UIs are controlled through environment variables: 
G4UI_BUILD_UIname_SESSION variables tell which UI have been built in 
Geant4, G4UI_USE_UIname tells you which UI your application will use.</p><p>
Which UIs are available in your setup?</p><p>
Hint: to see all environment variables related to Geant4 you can issue the shell command: </p><div class="fragment"><pre class="fragment">       % env | grep G4
   </pre></div><h3><a class="anchor" name="vis3sub3">
Exercise 0.6: Run the example with the default UI and driver</a></h3>
When the example is executed without arguments it automatically uses the
 vis.mac macro (line 121 of file exampleN03.cc). This file automatically
 opens a graphic window.<p>
Which UI to use is decided at compilation time via the G4UI_USE_UIname 
variables; to change the UI you need to recompile your code.</p><p>
Only one UI can be used each time. If more than one G4UI_USE_UIname is 
set the UI that is actually used is chosen as follows: G4UI_USE_TCSH has
 the highest preference, then G4UI_USE_XM followed by G4UI_USE_QT (if 
none is set a very basic text based UI will be used).</p><p>
Which is the UI that you are using?</p><h3><a class="anchor" name="vis3sub4">
Exercise 0.7: Change zoom and move camera with default driver and UI</a></h3>
Launch the application and move the camera 5 cm to the left and increase zoom by 30%:<p>
</p><div class="fragment"><pre class="fragment">       % $G4WORKDIR/bin/$G4SYSTEM/exampleN03
       Idle&gt; /vis/viewer/pan -5 0 cm
       IDle&gt; /vis/viewer/zoom 1.3
    </pre></div><p>
What is the difference between pan/zoom and panTo/zoomTo commands?</p><p>
Hint: at G4 prompt try: </p><div class="fragment"><pre class="fragment">       Idle&gt; ls /vis/viewer
       IDle&gt; help /vis/viewer/PutHereTheCommandName
    </pre></div><h3><a class="anchor" name="vis3sub5">
Exercise 0.8: Use OpenGL Qt driver</a></h3>
Repeat exercise 4 with the OpenGL Qt driver.<p>
Do you notice any difference?</p><p>
Hint: change vis.mac file, change /vis/open OGLIX to /vis/open OGLIQt</p><h3><a class="anchor" name="vis3sub6">
Exercise 0.9: Use Qt User Interface</a></h3>
Now we want to change the TCSH UI with the Qt one. Re-read the notes of Exercise 3.<p>
Unset, if needed, G4UI_USE_TCSH and/or G4UI_USE_XM variables. Hint: use shell command: </p><div class="fragment"><pre class="fragment">        % unset G4UI_USE_TCSH
        % unset G4UI_USE_XM
    </pre></div> Rememeber that now you need to recompile your code! Acutally only the code containing the main function has to be recompiled: <div class="fragment"><pre class="fragment">        % touch exampleN03.cc
        % gmake
    </pre></div><p>
Re-run example. Try the Help button.</p><p>
Interact with the detector window: you can use the mouse to zoom, rotate pan etc (Hint: use right click for more options).</p><p>
Get familiar with the new interface.</p><p>
Since you will use Qt driver and UI for the rest of the tutorial you can
 create a small shell script that unsets the environment variables every
 time you make a login. </p></div>
<hr size="1">
<div class="footer">
  <address style="text-align: right;"><small>
Generated on Wed Feb 17 12:49:57 2010 for task0 by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="geat4_visualisation_files/doxygen.png" alt="doxygen" align="middle" border="0"></a>
  1.5.8</small></address>
</div>
<div class="onlyprint">
  <address style="text-align: right;"><small>
Generated on Wed Feb 17 12:49:57 2010</small></address>
</div>  
</body></html>